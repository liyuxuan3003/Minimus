\ProvidesPackage{minimus-reference}

% -------------------------------- %
% Load Package <hyperref> : Hyperlinks for ref/cite/toc
% hidelinks -> Hide box of hyperlinks
\RequirePackage[hidelinks]{hyperref}

% -------------------------------- %
% Load Package <aliascnt> : Create alian for counter
\RequirePackage{aliascnt}
% aliascnt must be loaded before cleveref
% aliascnt's \newaliascnt must be used after cleveref has been loaded

% -------------------------------- %
% Load Package <cleveref> : Clever reference with type
\RequirePackage{cleveref}
% \cref -> lowercase ref (section 1.1)
% \Cref -> uppercase ref (Section 1.1)
% For zh-cn, just set lowercase and uppercase ref format to the same.

% \crefformat       -> format for single ref
% \crefformat{type}{format}
% |- format
%   |- #1    -> counter
%   |- #2/#3 -> hyperref range

% \crefrangeformat  -> format for range ref
% \crefrangeformat{type}{format}
% |- format
%   |- #1    -> counter of first
%   |- #2    -> counter of last
%   |- #3/#4 -> hyperref range of first
%   |- #5/#6 -> hyperref range of last

% \crefmultiformat  -> format for multi ref
% \crefmultiformat{type}{first}{second}{middle}{last}
% |- first   -> Always, format for first ref
%   |- #1    -> counter
%   |- #2/#3 -> hyperref range
% |- second  -> If only 2, format for second ref
%   |- #1    -> counter
%   |- #2    -> hyperref range
% |- middle  -> If more than 2, format for every ref in middle
%   |- #1    -> counter
%   |- #2    -> hyperref range
% |- last    -> If more than 2, format for last ref
%   |- #1    -> counter
%   |- #2    -> hyperref range

% Part
\crefformat{part}{\CJKsetecglue{}#2{第{#1}部分}#3}
\Crefformat{part}{\CJKsetecglue{}#2{第{#1}部分}#3}

\crefrangeformat{part}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}部分}#6}
\Crefrangeformat{part}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}部分}#6}

\crefmultiformat{part}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}部分}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}部分}#3}
\Crefmultiformat{part}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}部分}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}部分}#3}

% Chapter
\crefformat{chapter}{\CJKsetecglue{}#2{第{#1}章}#3}
\Crefformat{chapter}{\CJKsetecglue{}#2{第{#1}章}#3}

\crefrangeformat{chapter}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}章}#6}
\Crefrangeformat{chapter}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}章}#6}

\crefmultiformat{chapter}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}章}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}章}#3}
\Crefmultiformat{chapter}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}章}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}章}#3}

% Section
\crefformat{section}{\CJKsetecglue{}#2{第{#1}节}#3}
\Crefformat{section}{\CJKsetecglue{}#2{第{#1}节}#3}

\crefrangeformat{section}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}节}#6}
\Crefrangeformat{section}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}节}#6}

\crefmultiformat{section}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}节}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}节}#3}
\Crefmultiformat{section}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}节}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}节}#3}

% Subsection
\crefformat{subsection}{\CJKsetecglue{}#2{第{#1}小节}#3}
\Crefformat{subsection}{\CJKsetecglue{}#2{第{#1}小节}#3}

\crefrangeformat{subsection}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}小节}#6}
\Crefrangeformat{subsection}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}小节}#6}

\crefmultiformat{subsection}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}
\Crefmultiformat{subsection}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}

% Subsubsection
\crefformat{subsubsection}{\CJKsetecglue{}#2{第{#1}小节}#3}
\Crefformat{subsubsection}{\CJKsetecglue{}#2{第{#1}小节}#3}

\crefrangeformat{subsubsection}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}小节}#6}
\Crefrangeformat{subsubsection}{\CJKsetecglue{}#3{第{#1}}#4--#5{{#2}小节}#6}

\crefmultiformat{subsubsection}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}
\Crefmultiformat{subsubsection}{\CJKsetecglue{}#2{第{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}小节}#3}

% Appendix
\crefformat{appendix}{\CJKsetecglue{}#2{附录{#1}}#3}
\Crefformat{appendix}{\CJKsetecglue{}#2{附录{#1}}#3}

\crefrangeformat{appendix}{\CJKsetecglue{}#3{附录{#1}}#4--#5{{#2}}#6}
\Crefrangeformat{appendix}{\CJKsetecglue{}#3{附录{#1}}#4--#5{{#2}}#6}

\crefmultiformat{appendix}{\CJKsetecglue{}#2{附录{#1}}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}}#3}
\Crefmultiformat{appendix}{\CJKsetecglue{}#2{附录{#1}}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1}}#3}


% Equation
\crefformat{equation}{\CJKsetecglue{}#2{式({#1})}#3}
\Crefformat{equation}{\CJKsetecglue{}#2{式({#1})}#3}

\crefrangeformat{equation}{\CJKsetecglue{}#3{式({#1}}#4--#5{{#2})}#6}
\Crefrangeformat{equation}{\CJKsetecglue{}#3{式({#1}}#4--#5{{#2})}#6}

\crefmultiformat{equation}{\CJKsetecglue{}#2{式({#1}}#3}{\CJKsetecglue{},\,#2{{#1})}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1})}#3}
\Crefmultiformat{equation}{\CJKsetecglue{}#2{式({#1}}#3}{\CJKsetecglue{},\,#2{{#1})}#3}{\CJKsetecglue{},\,#2{{#1}}#3}{\CJKsetecglue{},\,#2{{#1})}#3}
